# 国产DSP与66AK之间的管理区别

国产m6678与tmsc6678结构上大体上相同，都包含了8个6678dsp核，指令集兼容。因此，在管理方式上是一致的。66AK系列是包含了arm与dsp核的soc，因此在管理方式上有所不同。

在管理上，把一个dsp核运行的TI-systemBios操作系统镜像，称作一个dspWorker，这个dspWorker，包含了以下几个组成部分

* systemBios操作系统
* 底层驱动
* 通信中间件
* dsp执行器框架
* dsp应用算法函数

这几个组成部分构成了一个dspWorker镜像，每个dsp的计算核都可以运行，一个芯片8个计算核，就可以运行了8个这样的镜像。每一个dspWorker在创建、运行、销毁的整个生命周期中，涉及到对一个dsp核独立的进行镜像文件的加载，参数的交互等过程。

### dsp芯片的局限性

无论是国产M6678还是TI-tmsc6678，虽然0核的镜像加载可以通过多种手段，比如本地NAND/NOR flash、远程RapidIO等接口，但1-7核的镜像加载都必须通过0核进行，这个是由芯片的设计决定的，因此，要使每个dsp核运行镜像像类似操作系统启动一个进程一样方便，0核就只能作为管理核。

### 解决方法

0核通过以太网从管理框架接收dspWorker的镜像文件，运行参数等信息，按指令要求，加载运行到指定的其它dsp核上去，并通过共享内存方式，将dspWorker的运行状态从其它核采集回来，通过以太网上报给管理框架。运行完毕时，0核再控制释放资源的其它处理核进入复位状态，等待下一次任务的开启。

至于每个计算核运行哪个dspWorker镜像及其中的算法函数，建立多少个逻辑通道，逻辑通道的未知信息等等，都是由管理框架决定的，0核只是作为管理其它核的低层驱动，忠实的执行框架传递的每个指令。

### 66AK的不同点

66AK系列上集成了arm核，可以运行linux操作系统，并且，与6678不同的是，arm核可以作为控制核，对其它0-7个dsp核做镜像加载、日志输出等控制（TI有MPM组建单独实现了这些功能）。因此，66ak可以最多提供8个dsp计算核，同时，对该66ak节点管理的节点管理器，也可以运行在arm核的linux操作系统上，相对应的，每个m6678的的节点管理器作为一个进程运行在主控节点的linux平台上。